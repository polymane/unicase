# REPORTED BUGS

MARKUS
- The menu item "export model element" is visible on project node. 
Clicking it caused the following exception in error log: 
java.lang.ArrayStoreException 
        at org.eclipse.emf.common.util.BasicEList.assign(BasicEList.java:124) 
        at org.eclipse.emf.common.util.BasicEList.addAllUnique(BasicEList.java:514) 
        at org.eclipse.emf.common.notify.impl.NotifyingListImpl.doAddAllUnique(NotifyingListImpl.java:506) 
        at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addAllUnique(NotifyingListImpl.java:478) 
        at org.eclipse.emf.common.notify.impl.NotifyingListImpl.addAllUnique(NotifyingListImpl.java:406) 
        at org.eclipse.emf.common.util.AbstractEList.addAll(AbstractEList.java:374) 
        at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copyAttribute(EcoreUtil.java:614) 
        at org.eclipse.emf.ecore.util.EcoreUtil$Copier.copy(EcoreUtil.java:479) 
        at org.eclipse.emf.ecore.util.EcoreUtil.copy(EcoreUtil.java:360) 
        at org.unicase.ui.navigator.handler.ExportModelHandler.getSelfContainedModelElementTree(ExportModelHandler.java:118) 
        at org.unicase.ui.navigator.handler.ExportModelHandler.execute(ExportModelHandler.java:63) 
        at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:294) 
        at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
=> ask Jonas: Patch for ui.navigator? -> strip it out of the project node

- using the Delete-Shortcut (in my case CTRL+DEL) on Projects shows a 
different Confirmation Dialog, asking me if I wanted to delete the 
project. Selecting Yes results in a Deletion-Progress (for about 0.1s), 
but doesn't do anything, although deleting via the context menu works
=> ask Jonas: Case specific key binding? -> report it in Unicase

- trying to Drag and Drop any Project or any contained Element results 
in a NullPointerException ("Unhandled event loop exception" in the Error 
Log)
=> ask Jonas: difficult to implement -> enough time for it?! -> report it to Unicase

IMPORTANT
- deleting a project while it's opened in the MEEditor causes a 
NullPointerException ("An unexpected exception was thrown" in the Error Log) 
=> ask Jonas/Max: How to handle this? How can we close the tabs before deleting the project?
	- test it with the EMFStore workspace, if doesn't occur check onDelete() in MEEditor
	- MEEditor -> init() -> ContextListener method should be called

- navigator does not update upon adding a new ME.
=> the case if there is no name yet -> send an email, no core issue

@ FROM Zardosht
10. I can select multiple items in navigator. However the menu items 
are not relevant then.
=> only selecting one is handled

# TODO
- summary presentation (5 min)
	- problem
	- our solution -> requirements
	- the biggest problems

@ OPTIONAL
- Delete Dialog should appear for multiple marked projects

@ POSTPONED
- Make resource path relative to workspace, if chosen from workspace.

@ IGNORE
- remove refresh from our implementation and change TreeView.refresh (also look for changes  in line 388 "addDropSupport")


# Accepted plugins:
# Message extract from Nov 15, 18.35h @ XMI/MemoryLeak Group Channel

As your implementation is for emfcp only you can and must Close all   
Plugins except Navigator Editor ui.Common navigatoreditor Bridge. I   
hope i didnt forget one.


# API Resources
http://download.eclipse.org/modeling/emf/emf/javadoc/2.6.0/
http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/overview-summary.html
	


# Resolved:
OK - Change Design -> Refactor, make the Commands do the work, not the Dialogs!
OK - Folder shouldn't be shown in the navigator -> the workspace should shortcut it to the projects in the folder
OK - Feature request: for notes l. 11+12 (ECP Folder Structure done) -> Markus
OK - We shouldn't have dependencies on the workspace package -> remove dependencies (also look for other dependencies that can be removed!) -> Markus
OK - Saving the (workspace-) file to an other place for example where the runtime is!
OK - Use own command instead of unicase command in the dialog
OK - Remove DeleteFolderHandler
Ok - Can we please use the org.unicase.metamodel package? We need it for the "NonDomainElement" and "AssociationClassElement". Otherwise I would have to implement the Classes in a util class.
Ok - With what content should we use the "Browse Workspace" package if the workspace is only ourselves?
Ok - What method is called on which object when you press (the already implemented) "Delete" right-clicking a project in the Navigator? Or how can I link "Delete" to the DeleteProjectHandler?
Ok - listener to refresh the navigator -> project/workspace listeners
Ok - Consolidate Delete: Consolidate Menu -> e.g. remove "Delete", Folder-Entries, ...
Ok - Import dialog: there might be a dialog in eclipse to shortcut to the workspace (directly browse the workspace -> example: reload genmodel)
Ok - Usecase: delete project-file from disk without deleting it in the workspace ->
	 resource.load automatically creates a new project-file!
Ok - where to to get a platform specific slash from?
Ok - Dialogs and Handlers
	 -> If project-file name/location.. is empty : now only error in console but should be a message dialog
Ok - Command Exceptions when invoking New, Import and delete
OK - refactor init() in XMIFileProjectImpl to Getter methods!
Ok - File changed on file system or has been deleted
	OK -> add a status to the project in form of an enumeration with the values LOADED, NOTLOADED, FAILEDTOLOAD
	OK -> Change the ItemProvider so it asks the project for its status and changes the icon/text if FAILEDTOLOAD
		-> also changed icon added
Ok - Remove commented code where metamodel-package-usage is marked and add a comment behind the return that this plugin does not support Associations, etc.
Ok - Send a Patch to Jonas from the navigator-package -> Delete in Menu-Issue
Ok - Change the Import- and New-Project-Dialog so the emf.common...ResourceDialog with the Eclipse-Navigator-Workspace-Content can be used.
Ok - The Slash is File.SEPARATOR .
Ok - In the XMIWorkspace call getProjects() instead of directly addressing the projects, because of the change listeners for the Navigator.
	-> This does not work, listener adapters in TreeView register on us and they need to be called when changed!
Ok - Send a Bug-Report to Jonas that if there are no packages registered for the application, the "New Model Element"-Dialog is strange...
OK - File changed on file system or has been deleted
	OK -> popupmenu needs to get a PropertyTester (new class) and then execute a Dialog where it asks the user what to do with the failed Projects (Import/Delete/New).
	OK -> Add icon to Resolve command
	OK -> plugin.xml: for deleted project only one popup menu entry: "resolve"
OK - refactor workspace -> remove folder items
OK - add Progress-bar when trying to load a folder (respectively trying to load projects from a folder)
OK - change project icon
OK - Delete menu entry does not work for baseElements
	see plugin.xml from ui.common where the "Delete" command is added,
	in our plugin.xml adding it was not successful and we can't extend
	the org.unicase.common.commands.DeleteModelElementCommand due to
	keyword final of the class
	The problem is that the EObjects don't know the project and therefore
	they will not be removed from the baseElements list.

	=> Solution:
	OK - change their DeleteModelElementCommand and add this line before deleting the eObject:
	eObject.eResource().getContents().remove(eObject);
	OK - add listener to fileprojectimpl
	
	OK - Test scenarios:
		- Unicase / EMFStore
		- XMI Workspace
	
OK - All models are displayed when you open up "New Model Element" on any project.
	It should be that in a new project, all models are displayed so the user can pick its model,
	but in an existing model only the model itself is shown.
		- If Package not found -> show dialog what to do
		- Search in NewModelElement Dialog throws an error, e.g. The image resource 'full/obj16/XSDNumericFacet' could not be located
	
	=> Solution:
	OK - Individual MetaModelElementContext for each project
	OK - Contextmenu add "Configure EPackages..."
		OK - add to and remove epackages from the project 
	OK - When project is loaded -> scan file and add the packages to the list of epackages
	OK - when a new baselement is added, also save its model and refresh the view
	OK - sort models alphabetically

OK - Add "Mark the Projects that shall be imported" in Import Folder Dialog

OK - prepare a feature
	OK - include icons
	OK - test deployment
	
OK - in the "Import Project from Folder"-Dialog when Browsing the Filesystem, cancelling the Folder Selection-Dialog doesn't seem to work (the Dialog reopens after cancelling, so that I have to choose a folder to close it) => fixed, but was intended!

OK - FIXED - Error 6:
	Description/Action: (Creating new Project, then New Model Element -> choosing XMIECPFolder -> putting new Project in this folder)
	Unhandled event loop exception
	
OK - FIXED - IMPORTANT - Error 7:
	Description/Action: (reimporting a deleted project/.ucw file through "import projects from folder")
	An unexpected exception was thrown.
	java.lang.NullPointerException
	
OK - FIXED - IMPORTANT
	it's possible to import the same project-file into the workspace 
	twice, allowing it to work simultaneously on the same .xmi file. 
	Changing one project doesn't update the other one (if I delete file XYZ 
	in project A, i can still change it in project B; restarting Eclipse 
	shows, that file XYZ appears again now in project A with the new changes 
	done in project B)
	
OK - Issue with open project in MEEditor

OK - If I enter two lines in the project description and then look at 
	the description after double clicking on the project in the navigator, 
	there's only one line shown and there's even no space between "the 
	lines".
	
OK - FIXED - IMPORTANT
	- when creating a new project ("New Project...") and selecting the 
	Location before entering the name, the created file will be some kind of 
	serial number (123689317863.ucw), even when changing the name afterwards 
	+ in the "Create/Import Project"-Dialog when Browsing the Filesystem but 
	not selecting any file (canceling the Folder/File Selection-Dialog), a 
	"12348638475817.ucw" file is selected from my workspace directory, even 
	though the file doesn't exist (but is created after clicking Yes)
	
OK - Dialog -> Configure Models
	- change the selection widget
		- see more @ http://blog.cypal-solutions.com/2008/07/selection-dialogs-in-eclipse.html
	- remove model check and auto adding

OK - remove deprecated complete models from XMIFileProjectImpl
	-> test it before you remove and commit it!