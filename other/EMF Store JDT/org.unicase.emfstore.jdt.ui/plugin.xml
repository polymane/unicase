<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
    <extension
       point="org.eclipse.ui.commands">
       <command
             id="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderCommitCommandID"
             name="Commit">
       </command>
       <command
             id="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderUpdateCommandID"
             name="Update">
       </command>
    <command
          id="org.unicase.emfstore.jdt.ui.menu.PushToEMFStoreEcoreCommandID"
          name="Push to EMFStore">
    </command>
    <command
          id="org.unicase.emfstore.jdt.ui.menu.PullFromEMFStoreEcoreCommandID"
          name="Pull from EMFStore">
    </command>
    <command
          id="org.unicase.emfstore.jdt.ui.menu.RejectFromEMFStoreEcoreCommandID"
          name="Reject from EMFStore">
    </command>
 </extension>
 
 <extension
       point="org.eclipse.ui.handlers">
    <handler
          class="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderCommitHandler"
          commandId="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderCommitCommandID">
       <enabledWhen>
          <with
                variable="selection">
             <iterate>
                <test
                      forcePluginActivation="true"
                      property="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTester.type"
                      value="canReject">
                </test>
             </iterate>
          </with>
       </enabledWhen>
    </handler>
    <handler
          class="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderUpdateHandler"
          commandId="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderUpdateCommandID">
       <enabledWhen>
          <with
                variable="selection">
             <iterate>
                <test
                      forcePluginActivation="true"
                      property="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTester.type"
                      value="canReject">
                </test>
             </iterate>
          </with>
       </enabledWhen>
    </handler>
    <handler
          class="org.unicase.emfstore.jdt.ui.menu.PushToEMFStoreEcoreHandler"
          commandId="org.unicase.emfstore.jdt.ui.menu.PushToEMFStoreEcoreCommandID">
       <enabledWhen>
          <with
                variable="selection">
             <iterate>
                <test
                      forcePluginActivation="true"
                      property="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTester.type"
                      value="canPush">
                </test>
             </iterate>
          </with>
       </enabledWhen>
    </handler>
    <handler
          class="org.unicase.emfstore.jdt.ui.menu.PullFromEMFStoreEcoreHandler"
          commandId="org.unicase.emfstore.jdt.ui.menu.PullFromEMFStoreEcoreCommandID">
    </handler>
    <handler
          class="org.unicase.emfstore.jdt.ui.menu.RejectFromEMFStoreEcoreHandler"
          commandId="org.unicase.emfstore.jdt.ui.menu.RejectFromEMFStoreEcoreCommandID">
       <enabledWhen>
          <with
                variable="selection">
             <iterate>
                <test
                      forcePluginActivation="true"
                      property="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTester.type"
                      value="canReject">
                </test>
             </iterate>
          </with>
       </enabledWhen>
    </handler>
 </extension>
 
 <extension
       point="org.eclipse.ui.menus">
    <menuContribution
          locationURI="popup:org.eclipse.ui.popup.any?after=additions">
       <menu
             label="EMFStore">
          <command
                commandId="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderCommitCommandID"
                style="push">
             <visibleWhen>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTester.type">
                      </test>
                      <not>
                         <test
                               forcePluginActivation="true"
                               property="org.unicase.emfstore.jdt.ui.menu.TeamSynchronizerAvailablePropertyTester.type">
                         </test>
                      </not>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
          <command
                commandId="org.unicase.emfstore.jdt.ui.menu.NoTeamProviderUpdateCommandID"
                style="push">
             <visibleWhen>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTester.type">
                      </test>
                      <not>
                         <test
                               forcePluginActivation="true"
                               property="org.unicase.emfstore.jdt.ui.menu.TeamSynchronizerAvailablePropertyTester.type">
                         </test>
                      </not>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
          <separator
                name="org.unicase.emfstore.jdt.ui.menu.separator"
                visible="true">
          </separator>
          <command
                commandId="org.unicase.emfstore.jdt.ui.menu.PushToEMFStoreEcoreCommandID"
                style="push">
             <visibleWhen>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTester.type">
                      </test>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
          <command
                commandId="org.unicase.emfstore.jdt.ui.menu.PullFromEMFStoreEcoreCommandID"
                style="push">
             <visibleWhen>
                <with
                      variable="activeMenuSelection">
                   <count
                         value="1">
                   </count>
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <or>
                         <instanceof
                               value="org.eclipse.core.resources.IContainer">
                         </instanceof>
                         <instanceof
                               value="org.eclipse.core.resources.IProjectNature">
                         </instanceof>
                      </or>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
          <command
                commandId="org.unicase.emfstore.jdt.ui.menu.RejectFromEMFStoreEcoreCommandID"
                style="push">
             <visibleWhen>
                <with
                      variable="activeMenuSelection">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTester.type">
                      </test>
                   </iterate>
                </with>
             </visibleWhen>
          </command>
       </menu>
    </menuContribution>
 </extension>
 <extension
       point="org.eclipse.core.expressions.propertyTesters">
    <propertyTester
          class="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTester"
          id="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTesterID"
          namespace="org.unicase.emfstore.jdt.ui.menu.IFileStateEMFStorePropertyTester"
          properties="type"
          type="org.eclipse.core.resources.IFile">
    </propertyTester>
    <propertyTester
          class="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTester"
          id="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTesterID"
          namespace="org.unicase.emfstore.jdt.ui.menu.EObjectInstancePropertyTester"
          properties="type"
          type="org.eclipse.core.resources.IFile">
    </propertyTester>
    <propertyTester
          class="org.unicase.emfstore.jdt.ui.menu.TeamSynchronizerAvailablePropertyTester"
          id="org.unicase.emfstore.jdt.ui.menu.TeamSynchronizerAvailablePropertyTesterID"
          namespace="org.unicase.emfstore.jdt.ui.menu.TeamSynchronizerAvailablePropertyTester"
          properties="type"
          type="org.eclipse.core.resources.IFile">
    </propertyTester>
 </extension>
 
    <extension
         point="org.eclipse.ui.editors">
      <editor
            class="org.unicase.emfstore.jdt.ui.editor.EMFStoreEcoreEditor"
            contributorClass="org.eclipse.emf.ecore.presentation.EcoreActionBarContributor"
            default="true"
            extensions="ecore"
            icon="icons/EMFStoreEcoreEditor.gif"
            id="org.unicase.emfstore.jdt.editor.ecore.EMFStoreEcoreEditorID"
            name="EMFStore EcoreEditor"/>
      <editor
            class="org.unicase.emfstore.jdt.ui.editor.EMFStoreGenModelEditor"
            contributorClass="org.eclipse.emf.codegen.ecore.genmodel.presentation.GenModelActionBarContributor"
            default="true"
            extensions="genmodel"
            icon="icons/EMFStoreGenModelEditor.gif"
            id="org.unicase.emfstore.jdt.editor.ecore.EMFStoreGenModelEditorID"
            name="EMFStore GenModelEditor">
      </editor>
   </extension>
    <extension
          point="org.eclipse.ui.decorators">
       <decorator
             adaptable="false"
             class="org.unicase.emfstore.jdt.ui.decorator.EMFStoreJDTEntryDecorator"
             id="org.unicase.emfstore.jdt.ui.decorator"
             label="EMFStore JDT"
             lightweight="true"
             location="BOTTOM_RIGHT"
             state="true">
          <description>
             %DecoratorLinkedResource.description
          </description>
          <enablement>
             <objectClass
                   name="org.eclipse.core.resources.IFile">
             </objectClass>
          </enablement>
       </decorator>
    </extension>
    
    <extension point="org.eclipse.ui.preferencePages">
       
       <page
             class="org.unicase.emfstore.jdt.ui.preferences.FileExtensionPreferencePage"
             id="EDTFileExtensionPreferencePage"
             name="EMF Development Toolkit">
       </page>
    </extension>

</plugin>
